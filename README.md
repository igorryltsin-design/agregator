# Agregator — локальный каталог научных материалов

Agregator — локальное веб-приложение для хранения, обогащения и интеллектуального поиска по научным материалам: статьям, диссертациям, презентациям, изображениям, аудио и вспомогательным файлам. Платформа умеет автоматически извлекать текст и метаданные, генерировать теги через LLM, строить графы связей, считать агрегаты и выдавать ответы на естественные вопросы с привязкой к первоисточникам.

Система предназначена для исследовательских команд, которым нужно работать с собственной библиотекой офлайн. Все вычислительные потоки выполняются на локальной машине, а доступ к данным контролируется через роли и ACL. 

## Содержание
- [Ключевые сценарии](#ключевые-сценарии)
- [Архитектура](#архитектура)
  - [Общая схема](#общая-схема)
  - [Backend](#backend)
  - [Хранение данных и кеши](#хранение-данных-и-кеши)
  - [Фоновые задачи](#фоновые-задачи)
- [Поток обработки данных](#поток-обработки-данных)
- [Пользовательские интерфейсы](#пользовательские-интерфейсы)
- [Интеллектуальные функции и ИИ](#интеллектуальные-функции-и-ии)
  - [Классический полнотекстовый поиск](#классический-полнотекстовый-поиск)
  - [AI-поиск и ответы](#ai-поиск-и-ответы)
  - [Голос и синтез речи](#голос-и-синтез-речи)
  - [Интеграция с внешними LLM](#интеграция-с-внешними-llm)
- [Установка и запуск](#установка-и-запуск)
- [Конфигурация](#конфигурация)
- [Импорт и управление библиотекой](#импорт-и-управление-библиотекой)
- [REST API](#rest-api)
- [AiWord — редактор научных текстов](#aiword--редактор-научных-текстов)
- [Структура репозитория](#структура-репозитория)
- [Эксплуатация и обслуживание](#эксплуатация-и-обслуживание)
- [Планы развития](#планы-развития)
- [Дополнительные материалы](#дополнительные-материалы)
- [Лицензия](#лицензия)

## Ключевые сценарии
- **Единое хранилище научных материалов.** Индексация локального каталога (`SCAN_ROOT`), нормализация метаданных и единый доступ через веб-интерфейс.
- **Автоматизированный импорт.** Сканирование каталогов, извлечение текста (PDF, DOCX, изображения), OCR для диссертаций и аудио-транскрибация через Faster Whisper.
- **Глубокий поиск.** Традиционный полнотекстовый поиск с морфологией и синонимами, фасеты, фильтры по тегам, годам и коллекциям.
- **AI-поддержка.** Расширение запроса, LLM-реранжирование, генерация ответов по найденным документам, голосовой поиск и синтез речи.
- **Работа исследовательских групп.** Коллекции с ACL (viewer/editor/owner), журналы действий, единые настройки, управление пользователями.
- **Автономный режим.** Встроенный редактор AiWord, который может работать в офлайн-среде, синхронизируя bibtex и контекст с Agregator.

## Архитектура

### Общая схема
- **Фронтенд** — SPA на React + TypeScript (Vite). Основные страницы: каталог, статистика, граф связей, админ-панель, настройки и встроенный просмотрщик.
- **Backend** — Flask-приложение с SQLAlchemy и SQLite (`catalogue.db`). Входная точка `app.py`, REST API вынесен в блюпринт `routes.py`.
- **Очередь задач** — собственный `TaskQueue` с воркерами, обрабатывающими OCR, LLM-аннотации, генерацию миниатюр, пересканирование.
- **LLM-интеграция** — HTTP-клиент с ретраями (`agregator/services/http.py`) подключается к LM Studio или любому OpenAI-совместимому серверу.
- **Runtime-настройки** — локальный JSON (`runtime_settings.json`), который UI редактирует через API без перезапуска приложения.

### Backend
- `app.py` — запуск Flask, аутентификация, импорт/сканирование, AI-поиск, голосовые эндпоинты, выдача фронтенда и AiWord.
- `routes.py` — CRUD по файлам, коллекциям, тегам, экспортам, подсказки по переименованию, вспомогательные RPC.
- `agregator/services/`:
  - `search.py` — слой полнотекстового поиска: поддержка FTS5, индексация, кеширование кандидатов, миграции триггеров.
  - `facets.py` — агрегаты (типы материалов, теги, годы) с кешированием и fallback для простых ключ/значение хранилищ.
  - `llm_cache.py` — TTL-кеш ответов LLM с семантикой LRU.
  - `http.py` — общий HTTP-клиент с ретраями и настраиваемыми таймаутами.
  - `logging.py` — форматирование логов в JSON, фильтрация чувствительных данных, интеграция с Sentry.
  - `tasks.py` — создание и выполнение фоновых задач, синхронизация индексов, уведомления UI.
- `models.py` — SQLAlchemy-модели: файлы, теги, коллекции, пользователи, логи, кеши AI-поиска, обратная связь пользователей.

### Хранение данных и кеши
- **SQLite (`catalogue.db`)** — основная база с материалами, тегами, ACL, журналами действий, кешами сниппетов и логами задач.
- **FTS-таблицы (`files_fts`, `tags_fts`)** — виртуальные таблицы для поиска по заголовкам, авторам, ключевым словам и тегам.
- **Кеши**:
  - `search_cache` — хранит результаты частых поисковых запросов и фасетов.
  - `llm_cache` — кэширует ответы LLM на время (`LLM_CACHE_TTL_SECONDS`) для экономии запросов.
  - `AiSearchSnippetCache` и `AiSearchKeywordFeedback` — накопление сниппетов и отзывов для улучшения AI-поиска.
- **Файловая структура**:
  - `library/` — по умолчанию рабочая библиотека (можно перенастроить).
  - `static/` и `frontend/dist/` — статические ассеты и собранный фронтенд.
  - `logs/` — вращаемые JSON-логи (`agregator.log`, `worker.log` и др.).

### Фоновые задачи
- Сканирование каталога (`scan`) с поддержкой возобновления и лимитов.
- Пересканирование отдельных файлов (`refresh`) с обновлением миниатюр, OCR и AI-аннотаций.
- Преобразование аудио и видео в текст через Faster Whisper и генерация ключевых слов.
- Подготовка миниатюр PDF, извлечение страниц, постпроцессинг изображений.
- Очистка устаревших кешей, реиндексация FTS и пересборка фасетов.
- Отправка прогресса в UI через `/scan/status` и `/tasks/status`.

## Поток обработки данных
1. **Обнаружение файла** — UI вызывает `POST /scan/start` или загрузку, задача попадает в очередь.
2. **Извлечение метаданных** — чтение EXIF/PDF metadata, нормализация автора, заголовка, года, определение коллекции.
3. **Извлечение текста** — прямое чтение текста или OCR (Tesseract через `PDF_OCR_PAGES_CFG`, Faster Whisper для аудио).
4. **Определение типа материала** — эвристики + LLM (ограничено настройками `TYPE_DETECT_FLOW` и `TYPE_LLM_OVERRIDE`).
5. **Генерация тегов** — комбинирование правил (`KEYWORDS_TO_TAGS_ENABLED`) и подсказок LLM для keyword extraction.
6. **Сохранение и индексация** — запись в SQLite, обновление FTS, фасетов, кешей, миниатюр и ссылок на файлы.
7. **Post-processing** — построение графовых связей, обновление статистики, уведомление UI о завершении.

## Пользовательские интерфейсы
- **Каталог** — выдача результатов, фильтры по типам, тегам, коллекциям, облако AI-ключевых слов, карточки материалов, предпросмотр PDF/изображений/видео.
- **AI-панель** — натуральные запросы с ответами LLM, голосовой поиск, синтез ответов, быстрые фильтры по коллекциям.
- **Статистика** — графики по авторам, годам, типам, тегам, коллекциям, среднему объёму, недостающим метаданным.
- **Граф связей** — визуализация соотношений тегов, материалов и авторов; переключение между “графом” и “облаком тегов”.
- **Импорт** — отслеживание очереди задач, лог операций, ручной запуск пересканирования, контроль ошибок.
- **Администрирование** — управление пользователями, ролями, коллекциями, просмотр журналов изменений (`ChangeLog`, `UserActionLog`).
- **Состояние сервиса** — админ-дашборд с аптаймом, состоянием очереди задач, нагрузкой на RAG/AI-поиск и фоновыми сервисами.
- **Горячие клавиши** — `/` (поиск), `Shift+?` (справка), `g`+`g/s/i` (каталог, статистика, импорт), `g`+`a/t/m/c/u` (админ-навигация).
- **Настройки** — редактирование runtime-параметров (пути, OCR, LLM, аудио, типы материалов), управление кэшами.
- **AiWord** — редактор научных текстов, интегрированный в `/aiword`, автоматически подгружает bibtex и настройки LLM из Agregator.

## Интеллектуальные функции и ИИ

### Классический полнотекстовый поиск
- Морфология и синонимы на основе Natasha/pymorphy2, собственный словарь для популярных терминов.
- SQLite FTS5 по заголовкам, авторам, ключевым словам, абстрактам, текущему текстовому фрагменту (`text_excerpt`).
- Комбинация точных фильтров и `LIKE`-поиска в fallback-режиме, когда FTS ещё не построен.
- Кеширование результатов и фасетов с автоматической инвалидацией (`SearchService.invalidate_cache`).

### AI-поиск и ответы
- Этапы:
  1. Получение кандидатов через FTS, фильтрация по коллекциям и типам.
  2. Формирование сниппетов (`AiSearchSnippetCache`), выделение терминов и частот.
  3. Необязательное LLM-реранжирование топ-15 результатов (через LM Studio или совместимый API).
  4. Генерация ответа и списка источников с ссылками на файлы (`/api/search/answer`).
  5. Запись обратной связи пользователя (`AiSearchKeywordFeedback`) для улучшения подсказок.
- Поддерживается TTL-кеш результатов (`LLM_CACHE_*`) и защита от двойного запроса за счёт хешей (`query_hash`).

### Голос и синтез речи
- **Голосовой поиск** (`VoiceSearchButton`) — запись через `MediaRecorder`, отправка в `/api/voice-search`, распознавание Faster Whisper / внешним сервисом.
- **Озвучивание ответов** — Web Speech API, управление скоростью и автопроговариванием ответов AI.
- **Транскрибация аудио** — фоновые задачи с кешированием результатов и созданием ключевых слов для последующего поиска.

### Интеграция с внешними LLM
- Поддерживаются LM Studio, OpenAI-совместимые API, локальные эндпоинты; базовый URL и модель задаются переменными `LMSTUDIO_API_BASE`, `LMSTUDIO_MODEL`.
- HTTP-клиент поддерживает ретраи, бэкофф и отдельные таймауты (чтение/подключение).
- AiWord и AI-панель автоматически подхватывают настройки из `runtime_settings.json`.
- Можно включить офлайн-режим с кэшированием (`LLM_CACHE_ONLY_MODE`), чтобы переиспользовать прошлые ответы.

## Установка и запуск

### Локальная установка (Python)
1. Установите Python 3.11+ и зависимости OCR (Tesseract, poppler) при необходимости.
2. Создайте окружение и установите пакеты:
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # Windows: .venv\Scripts\activate
   pip install -r requirements.txt
   ```
3. Скопируйте пример `.env` и настройте переменные:
   ```bash
   cp .env.example .env
   ```
4. Запустите приложение:
   ```bash
   python app.py
   ```
   Интерфейс будет доступен на `http://localhost:5050/app`.

### Docker Compose
- `docker-compose.yml` — стандартный режим: Flask + фоновые воркеры + LM Studio (по желанию). Сборка: `docker compose build`, запуск: `docker compose up`.
- `docker-compose.dev.yml` — окружение для разработки с hot-reload (Flask + Vite). Запуск: `docker compose -f docker-compose.yml -f docker-compose.dev.yml up`.
- `docker-compose.test.yml` — юнит-тесты в контейнере (`pytest` вместе с временной БД в памяти).
- Переменные окружения для контейнеров вынесены в `docker/app.env`, дополнительные пакеты — `docker/system-packages.txt`.

### Скрипты
- `start.sh` — пример запуска в Linux/macOS (поддерживает auto-build фронтенда, активацию conda).
- `start.bat` — Windows-аналог.
- `scripts/export_aiword.sh` — создание автономной копии фронтенда AiWord (см. раздел про редактор).

## Конфигурация

### Файл `.env`
| Переменная | Назначение |
| --- | --- |
| `SCAN_ROOT` | Корневая папка библиотеки. Используется сканером и UI (можно изменить из настроек). |
| `EXTRACT_TEXT` | Извлекать ли текст при сканировании (True/False). |
| `LMSTUDIO_API_BASE`, `LMSTUDIO_MODEL`, `LMSTUDIO_API_KEY` | Параметры подключения к LLM (LM Studio, OpenAI-совместимые сервисы). |
| `LLM_CACHE_ENABLED`, `LLM_CACHE_TTL_SECONDS`, `LLM_CACHE_MAX_ITEMS`, `LLM_CACHE_ONLY_MODE` | Управление кешем ответов LLM. |
| `SEARCH_CACHE_ENABLED`, `SEARCH_CACHE_TTL_SECONDS`, `SEARCH_CACHE_MAX_ITEMS` | Настройки кеша результатов полнотекстового поиска. |
| `DEFAULT_USE_LLM`, `DEFAULT_PRUNE` | Значения по умолчанию для сканирования (использовать ли LLM, удалять ли отсутствующие файлы). |
| `TRANSCRIBE_ENABLED`, `TRANSCRIBE_BACKEND`, `TRANSCRIBE_MODEL_PATH`, `TRANSCRIBE_LANGUAGE` | Параметры аудио-транскрибации. |
| `MAX_CONTENT_LENGTH` | Максимальный размер загружаемого файла (в байтах). |
| `AGREGATOR_TASK_WORKERS` | Число фоновых воркеров. |
| `AG_HTTP_TIMEOUT`, `AG_HTTP_CONNECT_TIMEOUT`, `AG_HTTP_RETRIES`, `AG_HTTP_BACKOFF` | Таймауты и поведение HTTP-клиента. |
| `LOG_LEVEL`, `SENTRY_DSN`, `SENTRY_ENVIRONMENT` | Логирование и интеграция с Sentry. |
| `DEFAULT_ADMIN_USER`, `DEFAULT_ADMIN_PASSWORD`, `ACCESS_CODE` | Первоначальный администратор и код доступа (legacy). |

### Runtime-настройки (UI → Настройки)
Хранятся в `runtime_settings.json` и включают:
- Пути (`SCAN_ROOT`, `IMPORT_SUBDIR`, `MOVE_ON_RENAME`, `TYPE_DIRS`).
- Извлечение текста и OCR (`EXTRACT_TEXT`, `PDF_OCR_PAGES_CFG`, `OCR_LANGS_CFG`, `ALWAYS_OCR_FIRST_PAGE_DISSERTATION`).
- Аудио и синтез (`TRANSCRIBE_*`, `AUDIO_KEYWORDS_LLM`, `SUMMARIZE_AUDIO`).
- Типизация и теги (`TYPE_DETECT_FLOW`, `TYPE_LLM_OVERRIDE`, `KEYWORDS_TO_TAGS_ENABLED`, `IMAGES_VISION_ENABLED`).
- Поиск и AI (`AI_RERANK_LLM`, `LMSTUDIO_*`, лимиты выдачи).

Настройки применяются на лету; перезапуск обслуживает только обновление зависимостей.

### HTTP-клиент и кеши
- Настройка таймаутов/ретраев через `agregator/services/http.py`.
- Очистка кешей выполняется из UI (раздел «Настройки») или через API:
  - `DELETE /api/cache/llm`
  - `DELETE /api/cache/search`
- Для полного сброса FTS доступна пересборка (`POST /api/admin/reindex`).

## Импорт и управление библиотекой
1. **Ручная загрузка** — `POST /api/files` или форма на странице каталога. Поддерживает drag&drop и создание новых тегов.
2. **Сканирование** — `POST /scan/start` с параметрами (`limit`, `skip`, `deep`). Прогресс отображается в модальном окне журнала.
3. **Пересканирование** — `POST /api/files/<id>/refresh` для обновления текста и метаданных конкретного файла.
4. **Переименование** — `GET/POST /api/files/<id>/rename` с подсказками по шаблонам.
5. **Коллекции и ACL** — управление на странице «Коллекции» (`/api/collections`, `/api/collections/<id>/members`).
6. **Теги** — быстрые кнопки на карточках, пакетное редактирование, текстовый формат `key=value`.
7. **Экспорт** — выгрузка BibTeX, CSV, ZIP с вложениями, автономные копии AiWord.

## REST API

| Группа | Методы | Назначение |
| --- | --- | --- |
| `/api/auth/*` | `POST /login`, `POST /logout`, `GET /me`, `POST /password` | Аутентификация, информация о пользователе, смена пароля. |
| `/api/files` | `GET`, `POST` | Список файлов, загрузка новых материалов. |
| `/api/files/<id>` | `GET`, `PUT`, `DELETE` | Детальная информация, обновление метаданных, удаление. |
| `/api/files/<id>/refresh` | `POST` | Пересканирование и обновление индексов для файла. |
| `/api/files/<id>/rename` | `GET`, `POST` | Подбор нового имени, применение переименования. |
| `/api/collections` | `GET` | Список коллекций пользователя. |
| `/api/collections/<id>/members` | `GET`, `POST`, `PATCH`, `DELETE` | Управление ACL и участниками коллекции. |
| `/api/search`, `/api/search_v2` | `GET` | Поиск по библиотеке (быстрый и постраничный режимы). |
| `/api/ai-search` | `POST` | AI-поиск с ответом, сниппетами и ключевыми словами. |
| `/api/facets` | `GET` | Фасеты (типы, теги, годы) для каталога и графа. |
| `/api/graph` | `GET` | Данные для графа связей тегов/материалов. |
| `/api/authority` | `GET` | Авторитетность документов, авторов, тематик и коллекций. |
| `/api/admin/status/overview` | `GET` | Сводное состояние сервиса: аптайм, очередь задач, БД, фоновые сервисы. |
| `/api/admin/ai-search/feedback/train` | `POST` | Перестроение весов на основании пользовательского фидбэка. |
| `/api/admin/ai-search/feedback/model` | `GET` | Текущая сводка весов фидбэка (топ положительных/отрицательных). |
| `/api/admin/ai-search/feedback/status` | `GET` | Статус планировщика и активных задач обучения фидбэка. |
| `/api/admin/ai-search/feedback/scheduler` | `POST` | Включение/выключение автотренера и мгновенный запуск. |
| `/api/admin/cache/llm` | `DELETE` | Очистка кэша ответов LLM. |
| `/api/admin/cache/search` | `DELETE` | Очистка кэша результатов поиска. |
| `/api/import/*` | `GET`, `POST` | Очередь задач, прогресс сканирования, отмена операций. |
| `/api/settings/*` | `GET`, `PUT` | Runtime-настройки (OCR, LLM, пути, лимиты). |
| `/scan/*` | `POST /start`, `POST /cancel`, `GET /status` | Управление полносканированием библиотеки. |

Полная спецификация см. в `docs/readme_ai.md` и `docs/architecture.md`.

## AiWord — редактор научных текстов
AiWord — отдельное фронтенд-приложение (React + Tailwind), встроенное в Agregator по адресу `/aiword` и предназначенное для подготовки научных текстов с опорой на библиотеку.

Возможности:
- Автосинхронизация BibTeX через `/api/aiword/bibtex`, заполнение `localStorage` настройками LLM при первом запуске.
- Генерация плана, черновиков, рецензий, тезисов, вопросов с помощью локального LLM (LM Studio).
- Интеграция с AI-поиском Agregator: построение запросов, вставка выдержек и источников в текст, автообновление раздела «Источники каталога».
- Потоковый режим (SSE) с подсветкой текущей вставки, кеширование запросов, восстановление состояния после перезапуска.
- Поддержка Markdown, KaTeX, шаблонов, профилей критериев, быстрых форматирований.

Запуск в разработке:
```bash
cd AiWord
npm install
npm run dev  # интерфейс по умолчанию на http://localhost:5173
```

Экспорт автономной копии:
```bash
./scripts/export_aiword.sh [папка-назначение] [--zip]
```
Скрипт подготовит структуру `dist/`, статические ресурсы и (опционально) архив `.tar.gz`, пригодный для переноса на другую машину.

## Структура репозитория

| Путь | Назначение |
| --- | --- |
| `app.py` | Flask-приложение, авторизация, API AI-поиска, фоновые задачи, выдача фронтенда. |
| `routes.py` | REST API для файлов, коллекций, экспорта, вспомогательных операций. |
| `agregator/` | Конфигурация, сервисы (поиск, фасеты, LLM, HTTP, логирование), фабрика приложения. |
| `models.py` | SQLAlchemy-модели, описание таблиц, функции для работы с тегами. |
| `frontend/` | Основной веб-интерфейс (React, Vite, CSS-тема). |
| `AiWord/` | Автономный редактор и его сборка. |
| `docker/` | Compose-файлы, переменные окружения, список системных пакетов. |
| `scripts/` | Утилиты (экспорт AiWord, тесты ffmpeg/whisper, сервисные скрипты). |
| `docs/` | Дополнительные материалы: архитектура, описание AI-поиска, руководства. |
| `tests/` | Юнит-тесты Python (примеры для фасетов, поиска и т.д.). |
| `static/`, `frontend/dist/` | Статика и собранные ассеты. |
| `backups/` | Автономные сборки AiWord и вспомогательные данные (для справки). |
| `models/` | Кэш моделей (faster-whisper, LLM), монтируется в контейнер для оффлайн-работы. |

## Эксплуатация и обслуживание
- **Резервные копии** — сохранение `catalogue.db`, `runtime_settings.json`, `logs/`, `library/` и экспорта AiWord. Для быстрого оффлайн-набора используйте `scripts/export_aiword.sh`.
- **Логи** — JSON-формат в `logs/`. Уровень управляется переменной `LOG_LEVEL`. Для отправки в Sentry укажите `SENTRY_DSN`.
- **Очистка кешей** — раздел «Настройки» в UI или API (`DELETE /api/cache/*`). При сильных изменениях данных выполните пересборку FTS.
- **Обновление** — перед апдейтом зависимости зафиксируйте виртуальное окружение, после обновления выполните миграцию (`SearchService.ensure_support`) и пересканирование выборочных файлов.
- **Мониторинг задач** — `/api/tasks/status` и UI-панель «Импорт» позволяют отслеживать прогресс и отменять зависшие операции.
- **Безопасность** — создайте администратора (`DEFAULT_ADMIN_*`), затем смените пароль и уберите переменные из `.env`. Используйте коллекции с ACL для разграничения доступа.
- **Регламенты и обучение** — см. `docs/admin_handbook.md` и `docs/training_resources.md` для детальных процедур, чек-листов и программы обучения.

## Планы развития

### Дорожная карта к версии 3.0

| Блок | Статус | Описание и ключевые задачи |
|------|:------:|----------------------------|
| **RAG и контекст** | ✅ | Сохраняем структуру документа (заголовки, путь разделов, расстояние до заголовка) и показываем её в UI вместе с весами и подсказками (`agregator/rag/indexing.py`, `app.py`, `frontend/src/pages/catalogue/AiPanel.tsx`). Настроен расчёт риска галлюцинаций и источников в ответе (`app.py`). |
| **RAG-операции** | ✅ | Добавлена кнопка и API для удаления индекса коллекции (`/api/collections/<id>/rag/delete`), обновлена админка. |
| **Голос/валидация** | ✅ | Для каждого ответа записываем риск-score и источники в `rag_sessions`, отображаем предупреждения в каталоге. |
| **Генерация псевдозапросов** | ✅ | Добавлен перефразировщик на LLM, кэш до 10 мин и агрегирование dense-результатов через Reciprocal Rank Fusion (по умолчанию до 3 формулировок). |
| **Гибридный retriever** | ✅ | FTS-запрос умеет `NEAR/5`, леммы/синонимы, оценки LLM объединяются с dense-поиском через RRF и структурный ранкер. |
| **Авто-перезапрос при риске** | ✅ | Встроен автоповтор: при высоком risk-score происходит переформулировка запроса, расширяется контекст и ответ генерируется повторно (настройки в админке: включение и порог). |
| **Метаданные и фильтры** | ✅ | Выведены отдельные блоки фасетов «Авторы» и «Годы», API отдаёт агрегаты и подсказки, UI показывает быстрые советы и фильтры по метаданным. |
| **Граф авторитетности** | ✅ | Расчёт PageRank/TopicRank по авторам, тегам и коллекциям; веса интегрированы в RAG, выдачу графа, REST `/api/authority` и раздел статистики. |
| **Обучение на фидбэке** | ✅ | Собираем клики/оценки (`ai_search_keyword_feedback`), тренируем веса rerank'а с учётом отзывов и применяем их в поиске, RAG и админ-интерфейсе. |
| **Пакетирование и деплой** | ✅ | Скрипт `scripts/package_release.sh`, Makefile и Ansible playbook с systemd unit для выката без Docker. |
| **CI/CD и мониторинг** | ✅ | GitHub Actions (`.github/workflows/ci.yml`) выполняет сборку фронтенда и pytest; `scripts/rag_smoke.py` агрегирует сводные метрики. |
| **UI/UX и доступность** | ✅ | Единый паттерн загрузки с `aria-busy` и скелетами (`frontend/src/ui/LoadingState.tsx`, каталожные и админские страницы), обновлённые темы с контрастом WCAG AA (`frontend/src/theme.css`, карточки каталога), внедрён набор горячих клавиш (`frontend/src/pages/App.tsx`) и подсказки в UI; админ-дашборд состояния (`/admin/status`, API `/api/admin/status/overview`) с ключевыми метриками нагрузки. |
| **Документация и обучение** | ✅ | Подготовлены `docs/setup_guide.md`, `docs/admin_handbook.md`, `docs/training_resources.md`: пошаговая настройка, типовые рабочие процессы, чек-листы и перечень обучающих материалов. |

_✅ — выполнено, ☐ — в работе/запланировано. Подробный план и история изменений для AI-поиска — в `docs/ai_search_roadmap.md`._

### Прочие задачи
- Интеграция дополнительных модальностей (скриншоты, OCR для рукописей) и улучшение пайплайна OCR.


## Дополнительные материалы
- `docs/setup_guide.md` — пошаговая настройка окружений (Docker и bare-metal), пост-установка и диагностика.
- `docs/admin_handbook.md` — типовые рабочие процессы, чек-листы и регламенты эксплуатации.
- `docs/training_resources.md` — программа обучения, ссылки на видео и учебные материалы (включая конспект 30-минутной презентации).
- `docs/Сценарий презентации программы **Agregator** (30 минут).docx` — подробный сценарий демонстрации; используйте вместе с разделом 6 `docs/training_resources.md`.
- `docs/architecture.md` — схема модулей и взаимодействий.
- `docs/readme_ai.md` — описание классического и AI-поиска, примеры запросов.
- `docs/ai_search_roadmap.md`, `docs/ai_search_operations.md` — дорожная карта и операционные заметки по AI-поиску.
- `docs/deployment.md` — сценарии развёртывания и советы по Docker/без Docker.

## Лицензия

Проект распространяется по лицензии **MIT NonCommercial License** (см. файл `LICENSE`). Использование допускается для некоммерческих целей при сохранении уведомлений об авторстве.
